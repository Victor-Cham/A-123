<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Consulta de Persona</title>
  <link rel="stylesheet" href="CSS/style.css">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
</head>
<body>

  <!-- Sidebar -->
  <nav class="sidebar" id="sidebar">
    <div class="sidebar-header">
      <h2>ᓚᘏᗢ</h2>
      <button id="toggleBtn">&#9776;</button>
    </div>

    <a href="#">Consignas</a>
    <a href="#">Dashboard</a>
    <a href="#">Personas</a>
    <a href="#">Usuarios</a>
    <a href="#">Control Acceso</a>
    <a href="#">Equipos</a>
    <a href="#">Documentos</a>
    <a href="#">Rutas</a>

    <button class="logout-btn" onclick="salir()">Salir</button>
  </nav>

  <header></header>

  <main class="content">
    <div class="page-header">
      <h1>Consulta de Persona</h1>
      <p class="subtitle">Sistema de gestión y validación</p>
      <button id="btnAgregar" class="btn-agregar" title="Agregar Persona">+</button>
    </div>

    <!-- Buscador -->
    <div class="card">
      <section id="busqueda">
        <input type="text" id="dni" placeholder="Ingrese DNI, pasaporte o carnet">
        <button id="btnBuscar">Buscar</button>
      </section>
    </div>

    <!-- Tabla -->
    <div class="card">
      <section id="resultado">
        <table id="tablaResultado">
          <thead>
            <tr>
              <th>Persona</th>
              <th>Documento</th>
              <th>Empresa</th>
              <th>Estado</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </section>
    </div>
  </main>

  <!-- Modal Detalle -->
  <div id="modalDetalle" class="modal">
    <div class="modal-content">
      <h3>Detalle de la Persona</h3>

      <div class="detalle-item"><strong>Persona:</strong> <span id="detNombre"></span></div>
      <div class="detalle-item"><strong>Documento:</strong> <span id="detDocumento"></span></div>
      <div class="detalle-item"><strong>Empresa:</strong> <span id="detEmpresa"></span></div>

      <div class="detalle-item estado">
        <strong>Estado:</strong>
        <span id="detEstadoTexto"></span>
        <span id="detEstadoSemaforo" class="semaforo"></span>
      </div>

      <div class="detalle-descripcion">
        <strong>Detalle:</strong>
        <div id="detDescripcion" class="descripcion-scroll"></div>
      </div>

      <div class="modal-buttons">
        <button onclick="cerrarModalDetalle()">Cerrar</button>
      </div>
    </div>
  </div>

  <!-- Modal Seguridad -->
  <div id="modal" class="modal">
    <div class="modal-content">
      <h3>Acceso restringido</h3>
      <p>Ingrese el código de seguridad</p>
      <input type="password" id="codigoAcceso" placeholder="Código">
      <div class="modal-buttons">
        <button onclick="validarCodigo()">Aceptar</button>
        <button onclick="cerrarModalSeguridad()">Cancelar</button>
      </div>
      <p id="mensajeError" style="color:red; margin-top:10px;"></p>
    </div>
  </div>

  <!-- Modal Agregar Persona -->
  <div id="modalAgregar" class="modal">
    <div class="modal-content">
      <h3>Agregar Persona</h3>

      <div class="detalle-item">
        <strong>Nombre:</strong>
        <input type="text" id="nuevoNombre" placeholder="Nombre completo">
      </div>

      <div class="detalle-item">
        <strong>DNI / Documento:</strong>
        <input type="text" id="nuevoDocumento" placeholder="Ingrese DNI">
      </div>

      <div class="detalle-item">
        <strong>Empresa:</strong>
        <input type="text" id="nuevaEmpresa" placeholder="Empresa">
      </div>

      <div class="detalle-item">
        <strong>Categoría:</strong>
        <select id="agregarCategoria">
          <option value="">--Seleccione--</option>
        </select>
      </div>

      <div class="detalle-item">
        <strong>Catálogo:</strong>
        <select id="agregarCatalogo" disabled>
          <option value="">--Seleccione categoría primero--</option>
        </select>
      </div>

      <div class="detalle-item">
        <strong>Detalle:</strong>
        <textarea id="agregarDescripcion" placeholder="Ingrese detalle"></textarea>
      </div>

      <div class="detalle-item">
        <strong>Fecha:</strong>
        <input type="date" id="agregarFecha">
      </div>

      <!-- NUEVO: Archivo opcional -->
      <div class="detalle-item">
        <strong>Archivo (opcional):</strong>
        <input type="file" id="agregarArchivo" accept=".pdf,.jpg,.jpeg,.png,.doc,.docx">
        <small style="display:block; margin-top:5px; color:gray;">
          Formatos permitidos: PDF, JPG, PNG, DOC
        </small>
      </div>

      <div class="modal-buttons">
        <button id="btnGuardarPersona">Guardar</button>
        <button onclick="cerrarModalAgregar()">Cancelar</button>
      </div>

      <p id="mensajeErrorAgregar" style="color:red; margin-top:10px;"></p>
    </div>
  </div>

  <!-- Scripts existentes -->
  <script src="js/app.js"></script>
  <script src="js/sidebar.js"></script>

  <!-- Script Categorías y Catálogos -->
  <script>
  const categorias = [
    {
      id: 1,
      nombre: "Laborales",
      catalogos: [
        "Suplantación EMO",
"Reuniones Extra Laborales en contra de MCP",
"Incumplir Protocolo COVID-19",
"Incumplimiento Políticas de Protección Empresarial",
"Incumplimiento a la Política de Alcohol y Drogas",
"incumplido los reglamentos internos de su compañia"
       
      ]
    },
    {
      id: 2,
      nombre: "Antecedentes Penales y Judiciales",
      catalogos: [
        "Sin Antecedentes",
        "Abandono de Destino",
"Abandono de mujer gestante",
"Abigeo",
"Aborto",
"Aborto Consentido",
"Aborto Preterintecional",
"Acoso",
"Actos contra el pudor",
"Apropiación Ilícita",
"Apropiación Ilícita y Estafa",
"Apropiación Irregular",
"Asalto a mano armada",
"Asociación Ilícita Para Delinquir; Tráfico Ilícito de Drogas; Peligro Común",
"Atentado contra el derecho de sufragio",
"Chantaje Sexual",
"Coacción",
"Coacción; Deserción ",
"""Conducción de Vehículo en estado de ebriedad
 "","
"Conducir en estado de ebriedad",
"Conducir en estado de ebriedad; Deserción",
"Contra los derechos de autor",
"Contrabando",
"Corrupción",
"Corrupción de Funcionario",
"Daño Agravado",
"Daño Simple",
"Daños",
"Daños al Patrimonio",
"Defraudación",
"Delito contra el Patrimonio",
"Delito de Contaminación del ambiente",
"Delitos conta la Libertad de Sufragio",
"Delitos contra el derecho de Sufragio",
"Delitos Contra la Administración Pública",
"Delitos Contra la Función Jurisdiccional",
"Delitos contra la Paz Pública y Robo Agravado",
"Delitos contra la salud publica en la modalidad de violación de medidas sanitarias",
"Delitos Contra la Tranquilidad Pública;Delito de Asociación Ilícita para Delinquir",
"Delitos Económicos",
"Delitos Monetarios",
"Depredación de flora y fauna legalmente protegidas",
"Deserción",
"Desobediencia y Resistencia a la Autoridad",
"Desobediencia y Resistencia a la Autoridad;Lesiones Culposas",
"Disturbios",
"Estafa",
"Exposición o abandono peligroso",
"Extorsión",
"Fabricación y falsificación de moneda",
"Falsa declaración",
"Falsedad Genérica",
"""Falsedad Genérica; Falsa declaración en procedimiento administrativo; Estafa
 "","
"Falsedad Ideológica",
"Falsedad Ideológica; Organización Criminal; Estafa Agravada",
"Falsificación de Documentos",
"Falsificación de Documentos; Falsedad Genérica",
"Falta Grave",
"Faltas",
"Faltas contra el Patrimonio",
"Faltas contra las personas",
"Feminicidio",
"Fraude Procesal",
"Homicidio",
"Homicidio Calificado",
"Homicidio Culposo",
"Homicidio Culposo; Delitos contra la Fe Pública",
"Homicidio Simple; Lesiones culposas",
"Homicidio Simple; Omisión Asistencia Familiar",
"Hurto",
"Hurto Agravado",
"Hurto Agravado; Deserción",
"Hurto Agravado; Lesiones Leves",
"Hurto Agravado; Lesiones Leves; Deserción",
"Hurto Simple",
"Impedimento de Salida del País Caducado por Alimentos",
"Impedimento de Salida del País por Omisión de Asistencia Familia",
"Impedimento de Salida por Omisión a la Asistencia Familiar",
"Imprudencia en la Conducción Vehicular",
"incumplido los reglamentos internos de su compañia",
"Incumplimiento a la Política de Alcohol y Drogas",
"Incumplimiento Políticas de Protección Empresarial",
"Incumplir Protocolo COVID-19",
"Inducción a la fuga de menor",
"Lesiones Culposas",
"Lesiones Culposas; Daño Simple",
"Lesiones Culposas; Lesiones Graves",
"Lesiones Dolosas",
"Lesiones Graves",
"Lesiones Graves por Violencia Familiar",
"Lesiones Graves; Deserción",
"Lesiones Leves",
"Lesiones Leves por Violencia Familiar",
"Lesiones Leves por Violencia Familiar(formas agravadas)",
"Lesiones Leves; Lesiones Culposas",
"Libramientos Indebidos (emitir cheque sin fondos)",
"Material sin autorización",
"Negociación incompatible; Corrupción de Funcionarios; Resistencia a la Autoridad",
"Omisión a la Asistencia Familiar",
"Omisión Asistencia Familiar",
"Omisión Asistencia Familiar ",
"Omisión Asistencia Familiar, Deserción",
"Omisión Asistencia Familiar, Homicidio Simple",
"Omisión Asistencia Familiar; Deserción",
"Omisión Asistencia Familiar; Lesiones Graves",
"Omisión Asistencia Familiar; Lesiones Leves; Violación Libertad Sexual",
"Omisión Asistencia Familiar; Peligro Común",
"Omisión Asistencia Familiar; y Homicidio ",
"Omisión Asistencia Familiar;Faltas contra las Personas",
"Omisión Asistencia Familiar;Hurto Agravado",
"Omisión de Asistencia Familiar",
"Omisión de Socorro",
"Omisión, rehusamiento o demora de actos funcionales",
"Peculado",
"Peligro Común",
"Presunta Violación Sexual",
"Proxenetismo",
"Receptación",
"Resistencia a la Autoridad",
"Reuniones Extra Laborales en contra de MCP",
"Robo",
"Robo Agravado",
"Robo Agravado y Hurto Simple",
"Robo Agravado; Peligro Común",
"Secuestro",
"Seducción",
"Suplantación EMO",
"Sustracción de Menor; Omisión Asistencia Familiar",
"Tenencia Ilegal de Armas de Fuego",
"Tentativa de Homicidio",
"Tentativa de Secuestro",
"Terrorismo",
"Terrorismo Agravado",
"Tocamientos Indebidos",
"Tocamientos, actos de connotación sexual o actos libidinosos sin Consentimiento",
"Tortura",
"Tráfico Ilegal de Armas de Fuego",
"Tráfico ilegal de productos forestales maderables",
"Tráfico Ilícito de Drogas",
"Tráfico Ilícito de Drogas y Deserción",
"Trata de Personas",
"Uso de Documentos Falsos",
"Usurpación",
"Usurpación Agravada",
"Usurpación; Daños al Patrimonio",
"Usurpación; Robo agravado",
"Violación de Domicilio",
"Violación de la Libertad Sexual",
"Violación de la Libertad Sexual; Hurto Simple",
"Violación de Medidas Sanitaria",
"Violación Libertad Sexual",
"Violación Sexual",
"Violencia Familiar (Maltrato Físico y Psicológico)",
"Violencia Familiar (Maltrato Físico)"
      ]
    }
  ];

  document.addEventListener("DOMContentLoaded", function () {

    const selectCategoria = document.getElementById("agregarCategoria");
    const selectCatalogo = document.getElementById("agregarCatalogo");

    categorias.forEach(cat => {
      const option = document.createElement("option");
      option.value = cat.id;
      option.textContent = cat.nombre;
      selectCategoria.appendChild(option);
    });

    selectCategoria.addEventListener("change", function () {

      const categoriaId = parseInt(this.value);
      selectCatalogo.innerHTML = '<option value="">--Seleccione--</option>';

      const categoriaSeleccionada = categorias.find(cat => cat.id === categoriaId);

      if (categoriaSeleccionada) {
        selectCatalogo.disabled = false;

        categoriaSeleccionada.catalogos.forEach(item => {
          const option = document.createElement("option");
          option.value = item;
          option.textContent = item;
          selectCatalogo.appendChild(option);
        });

      } else {
        selectCatalogo.disabled = true;
      }

    });

  });
  </script>

</body>
</html>
